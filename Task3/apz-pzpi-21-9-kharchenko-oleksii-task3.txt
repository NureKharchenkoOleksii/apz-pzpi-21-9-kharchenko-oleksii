ЛАБОРАТОРНА РОБОТА №3
3.1 Мета роботи

Метою даної лабораторної роботи є розробка програмного забезпечення для IoT пристрою, який буде частиною системи управління торговим центром. Пристрій реалізується на базі Arduino Uno та повинен взаємодіяти з основною програмною системою. Програмне забезпечення має реалізовувати функціональність електронного цінника, забезпечуючи автоматичне оновлення цін та взаємодію з серверною частиною системи.

3.2 Хід роботи

Для розробки програмного забезпечення IoT пристрою використовується мова програмування Arduino (.ino). Пристрій складається з плати Arduino Uno, Wi-Fi модуля ESP8266, E-Paper дисплею Waveshare 2.9", GPS-модуля NEO-6M та модуля живлення LM2596. Будова пристрою відображена на рисунку 1.
Рисунок 1 – Будова IoT пристрою
Кожні 30 секунд пристрій перевіряє наявність оновлень цін, отримує дані з серверної частини через Wi-Fi з'єднання та оновлює інформацію на E-Paper дисплеї. Після кожного оновлення пристрій відправляє статус на сервер:
void checkPriceUpdate() {
  if (WiFi.status() == WL_CONNECTED) {
    HTTPClient http;
    http.begin(serverUrl);
    int httpCode = http.GET();
    
    if (httpCode > 0) {
      String payload = http.getString();
      updateDisplay(payload);
      sendStatus("Price updated successfully");
    } else {
      sendStatus("Failed to get price update");
    }
    http.end();
  }
}
void updateDisplay(String price) {
  display.clearBuffer();
  display.setFont(&FreeSans9pt7b);
  display.setCursor(10, 30);
  display.print("Price: ");
  display.print(price);
  display.display();
}
Розглянемо UML діаграму прецедентів, зображену на рисунку 2. Користувач може зареєструвати пристрій в системі, увімкнути та вимкнути його, переглянути поточну ціну на дисплеї та статус оновлення на веб-інтерфейсі системи.
Рисунок 2 - UML діаграма прецедентів
Давайте розглянемо UML діаграму взаємодії, яка зображена на рисунку 3. Процес взаємодії починається з під'єднання пристрою до Wi-Fi мережі торгового центру. Після успішного підключення, пристрій входить в цикл, де він періодично запитує оновлення цін з сервера, оновлює інформацію на дисплеї та відправляє статус оновлення назад на сервер.
Рисунок 3 - UML діаграма взаємодій
На рисунку 4 представлена UML діаграма діяльності. Ця діаграма показує послідовність дій, які відбуваються на пристрої електронного цінника та на серверній частині системи управління торговим центром.
Рисунок 4 - UML діаграма діяльності

3.3 Висновки

У ході лабораторної роботи було розроблено програмне забезпечення для IoT пристрою – електронного цінника, який є частиною системи управління торговим центром. Реалізовано функціонал автоматичного оновлення цін, відображення інформації на E-Paper дисплеї та взаємодії з серверною частиною системи. Створені UML діаграми допомагають візуалізувати структуру, взаємодію та потік даних у системі. Розроблений пристрій демонструє практичне застосування концепцій IoT у контексті автоматизації процесів у торговому центрі, що підвищує ефективність управління та покращує досвід покупців. 

Додаток А
Програмний код